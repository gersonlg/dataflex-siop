//--
//-- !1 = conta corrente
//-- !2 = mes selecionado
//--
#COMMAND APAGA_CONTACOR
 CLEAR CONTACOR
 CONSTRAINT_SET 1
 CONSTRAIN CONTACOR.ANO          EQ ST@EXERCICIO
 CONSTRAIN CONTACOR.MES          EQ !2
 CONSTRAIN CONTACOR.COD_ENTIDADE EQ ST@COD@ENTIDADE
 CONSTRAIN CONTACOR.XML          EQ !1
 CONSTRAINED_FIND FIRST CONTACOR BY INDEX.1
 WHILE [FOUND]
  CALC (JN_LENDO + 1) TO JN_LENDO
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD CONTACOR
  DELETE CONTACOR
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR CONTACOR
#ENDCOMMAND

//--
//-- !1 = tipo de dado
//-- !2 = mes selecionado
//--
#COMMAND APAGA_GERSICOM
 CLEAR GERSICOM
 CONSTRAINT_SET 1
 CONSTRAIN GERSICOM.ANO          EQ ST@EXERCICIO
 CONSTRAIN GERSICOM.MES          EQ !2
 CONSTRAIN GERSICOM.COD_ENTIDADE EQ ST@COD@ENTIDADE
 CONSTRAIN GERSICOM.TIPO_DADO    EQ !1
 CONSTRAINED_FIND FIRST GERSICOM BY INDEX.1
 WHILE [FOUND]
  CALC (JN_LENDO + 1) TO JN_LENDO
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD GERSICOM
  DELETE GERSICOM
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR GERSICOM
#ENDCOMMAND


//======================= ST@USUARIO ===========================


//--
//--!1 = se diferente de branco = NUMERO do tempaude
//--
#COMMAND APAGA_TEMPAUDE
 CLEAR TEMPAUDE
 CONSTRAINT_SET 1
 CONSTRAIN TEMPAUDE.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TEMPAUDE.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TEMPAUDE.USUARIO      EQ ST@USUARIO
 IF !1 NE '' CONSTRAIN TEMPAUDE.NUMERO EQ !1
 CONSTRAINED_FIND FIRST TEMPAUDE BY INDEX.3
 WHILE [FOUND]
  CALC (JN_LENDO + 1) TO JN_LENDO
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TEMPAUDE
  DELETE TEMPAUDE
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 
 CLEAR TEMPAUDE
 CONSTRAINT_SET 1
 CONSTRAIN TEMPAUDE.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TEMPAUDE.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TEMPAUDE.USUARIO      EQ ST@USR@TTY
 IF !1 NE '' CONSTRAIN TEMPAUDE.NUMERO EQ !1
 CONSTRAINED_FIND FIRST TEMPAUDE BY INDEX.3
 WHILE [FOUND]
  CALC (JN_LENDO + 1) TO JN_LENDO
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TEMPAUDE
  DELETE TEMPAUDE
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR TEMPAUDE
#ENDCOMMAND

//--
//-- !1 = JN_LENDO para programas que utilizam -> calc (jn_lendo + 1) to jn_lendo
//--
#COMMAND APAGA_TEMPCALC
 CLEAR TEMPCALC
 CONSTRAINT_SET 1
 CONSTRAIN TEMPCALC.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TEMPCALC.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TEMPCALC.USUARIO      EQ ST@USUARIO
 CONSTRAINED_FIND FIRST TEMPCALC BY INDEX.1
 WHILE [FOUND]
  #IF (!0=1)
   CALC (!1+1) TO !1
  #ENDIF
  
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TEMPCALC
  DELETE TEMPCALC
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 
 CLEAR TEMPCALC
 CONSTRAINT_SET 1
 CONSTRAIN TEMPCALC.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TEMPCALC.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TEMPCALC.USUARIO      EQ ST@USR@TTY
 CONSTRAINED_FIND FIRST TEMPCALC BY INDEX.1
 WHILE [FOUND]
  #IF (!0=1)
   CALC (!1+1) TO !1
  #ENDIF
  
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TEMPCALC
  DELETE TEMPCALC
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR TEMPCALC
#ENDCOMMAND

//--
//-- !1 = usuario
//--
#COMMAND APAGA_TRECFON
 CLEAR TRECFON
 CONSTRAINT_SET 1
 CONSTRAIN TRECFON.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TRECFON.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TRECFON.USUARIO      EQ ST@USUARIO
 CONSTRAINED_FIND FIRST TRECFON BY INDEX.1
 WHILE [FOUND]
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TRECFON
  DELETE TRECFON
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 
 CLEAR TRECFON
 CONSTRAINT_SET 1
 CONSTRAIN TRECFON.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TRECFON.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TRECFON.USUARIO      EQ ST@USR@TTY
 CONSTRAINED_FIND FIRST TRECFON BY INDEX.1
 WHILE [FOUND]
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TRECFON
  DELETE TRECFON
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR TRECFON
#ENDCOMMAND

//--
//-- !1 = usuario
//--
#COMMAND APAGA_BKDESCON
 CLEAR BKDESCON
 CONSTRAINT_SET 1
 CONSTRAIN BKDESCON.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN BKDESCON.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN BKDESCON.USUARIO      EQ ST@USUARIO
 CONSTRAINED_FIND FIRST BKDESCON BY INDEX.1
 WHILE [FOUND]
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD BKDESCON
  DELETE BKDESCON
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 
 CLEAR BKDESCON
 CONSTRAINT_SET 1
 CONSTRAIN BKDESCON.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN BKDESCON.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN BKDESCON.USUARIO      EQ ST@USR@TTY
 CONSTRAINED_FIND FIRST BKDESCON BY INDEX.1
 WHILE [FOUND]
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD BKDESCON
  DELETE BKDESCON
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR BKDESCON
#ENDCOMMAND

//--
//-- !1 = JN_LENDO para programas que utilizam -> calc (jn_lendo + 1) to jn_lendo
//--
#COMMAND APAGA_TEMPOR
 CLEAR TEMPOR
 CONSTRAINT_SET 1
 CONSTRAIN TEMPOR.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TEMPOR.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TEMPOR.USUARIO      EQ ST@USUARIO
 CONSTRAINED_FIND FIRST TEMPOR BY INDEX.1
 WHILE [FOUND]
  #IF (!0=1)
   CALC (!1+1) TO !1
  #ENDIF
  
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TEMPOR
  DELETE TEMPOR
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 
 CLEAR TEMPOR
 CONSTRAINT_SET 1
 CONSTRAIN TEMPOR.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN TEMPOR.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN TEMPOR.USUARIO      EQ ST@USR@TTY
 CONSTRAINED_FIND FIRST TEMPOR BY INDEX.1
 WHILE [FOUND]
  #IF (!0=1)
   CALC (!1+1) TO !1
  #ENDIF
  
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD TEMPOR
  DELETE TEMPOR
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR TEMPOR
#ENDCOMMAND

//--
//-- !1 = JN_LENDO para programas que utilizam -> calc (jn_lendo + 1) to jn_lendo
//--
#COMMAND APAGA_APITEMP
 CLEAR APITEMP
 CONSTRAINT_SET 1
 CONSTRAIN APITEMP.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN APITEMP.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN APITEMP.USUARIO      EQ ST@USUARIO
 CONSTRAINED_FIND FIRST APITEMP BY INDEX.1
 WHILE [FOUND]
  #IF (!0=1)
   CALC (!1+1) TO !1
  #ENDIF
  
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD APITEMP
  DELETE APITEMP
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 
 CLEAR APITEMP
 CONSTRAINT_SET 1
 CONSTRAIN APITEMP.COD_ENTIDADE EQ ST@CODIGO@ENTIDADE
 CONSTRAIN APITEMP.EXERCICIO    EQ ST@EXERCICIO@FINANCEIRO
 CONSTRAIN APITEMP.USUARIO      EQ ST@USR@TTY
 CONSTRAINED_FIND FIRST APITEMP BY INDEX.1
 WHILE [FOUND]
  #IF (!0=1)
   CALC (!1+1) TO !1
  #ENDIF
  
  INDICATE ERR FALSE
  ON ERROR GOSUB CHECA_GRAVACAO
  REREAD APITEMP
  DELETE APITEMP
  UNLOCK
  ON ERROR OFF
  CONSTRAINED_FIND NEXT
 END
 CONSTRAINT_SET 1 CLEAR
 CLEAR APITEMP
#ENDCOMMAND

